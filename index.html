<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>食譜記錄程式</title>
<style>
  body {
    font-family: "微軟正黑體", "Microsoft JhengHei", Arial, sans-serif;
    max-width: 600px;
    margin: 20px auto;
    background: #fff8f0;
    color: #333;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 8px #ccc;
  }
  h1 {
    text-align: center;
    color: #d2691e;
  }
  label {
    display: block;
    margin: 15px 0 5px;
    font-weight: bold;
  }
  input[type=text], textarea {
    width: 100%;
    padding: 8px;
    border: 2px solid #d2691e;
    border-radius: 4px;
    font-size: 1rem;
  }
  textarea {
    resize: vertical;
    height: 100px;
  }
  button {
    background-color: #d2691e;
    color: white;
    border: none;
    padding: 10px 15px;
    font-size: 1rem;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 15px;
  }
  button:hover {
    background-color: #a0522d;
  }
  .recipe-list {
    margin-top: 30px;
  }
  .recipe-item {
    border-bottom: 1px solid #d2691e;
    padding: 10px 0;
  }
  .recipe-title {
    font-size: 1.2rem;
    font-weight: bold;
    color: #a0522d;
  }
  .recipe-content {
    white-space: pre-wrap;
    margin-top: 5px;
  }
</style>
</head>
<body>
<h1>我的食譜記錄</h1>
<form id="recipeForm">
  <label for="title">食譜名稱</label>
  <input type="text" id="title" placeholder="請輸入食譜名稱" required />

  <label for="ingredients">食材（每行一項）</label>
  <textarea id="ingredients" placeholder="請輸入食材，每行一項" required></textarea>

  <label for="steps">做法步驟</label>
  <textarea id="steps" placeholder="請輸入做法步驟" required></textarea>

  <button type="submit">新增食譜</button>
</form>

<section class="recipe-list" id="recipeList">
  <h2>已記錄的食譜</h2>
</section>

<script>
  // 讀取本地儲存食譜
  function loadRecipes() {
    const recipes = JSON.parse(localStorage.getItem('recipes') || '[]');
    return recipes;
  }

  // 儲存食譜至本地儲存
  function saveRecipes(recipes) {
    localStorage.setItem('recipes', JSON.stringify(recipes));
  }

  // 顯示食譜列表
  function displayRecipes() {
    const recipeList = document.getElementById('recipeList');
    const recipes = loadRecipes();
    // 清空現有清單
    recipeList.innerHTML = '<h2>已記錄的食譜</h2>';

    if (recipes.length === 0) {
      recipeList.insertAdjacentHTML('beforeend', '<p>暫時沒有食譜，請新增一個！</p>');
      return;
    }

    recipes.forEach((recipe) => {
      const itemHtml = `
      <div class="recipe-item">
        <div class="recipe-title">${recipe.title}</div>
        <div><strong>食材:</strong></div>
        <div class="recipe-content">${recipe.ingredients.replace(/\n/g, '<br>')}</div>
        <div><strong>做法:</strong></div>
        <div class="recipe-content">${recipe.steps.replace(/\n/g, '<br>')}</div>
      </div>`;
      recipeList.insertAdjacentHTML('beforeend', itemHtml);
    });
  }

  // 表單送出事件處理
  document.getElementById('recipeForm').addEventListener('submit', function(e){
    e.preventDefault();
    const title = document.getElementById('title').value.trim();
    const ingredients = document.getElementById('ingredients').value.trim();
    const steps = document.getElementById('steps').value.trim();

    if (!title || !ingredients || !steps) {
      alert('請完整填寫所有欄位');
      return;
    }

    const recipes = loadRecipes();
    recipes.push({title, ingredients, steps});
    saveRecipes(recipes);

    this.reset();
    displayRecipes();
  });

  // 首次載入顯示
  displayRecipes();
</script>
</body>
</html>
